// Quiz data for all QCM questions
// Topics map to course modules for score breakdown

export type QuizTopic = 'docker-basics' | 'wsl' | 'containers' | 'dockerfile' | 'compose' | 'multistage' | 'networking' | 'security' | 'advanced-compose' | 'registry' | 'cicd';

export interface QuizQuestion {
  id: number;
  question: string;
  options: string[];
  correctIndex: number;
  explanation: string;
  topic: QuizTopic;
}

export const TOPIC_LABELS: Record<QuizTopic, string> = {
  'docker-basics': 'Bases Docker',
  'wsl': 'WSL2',
  'containers': 'Conteneurs',
  'dockerfile': 'Dockerfile',
  'compose': 'Docker Compose',
  'multistage': 'Multi-stage Builds',
  'networking': 'Networking',
  'security': 'Securite',
  'advanced-compose': 'Compose Avance',
  'registry': 'Registry',
  'cicd': 'CI/CD',
};

export const QUIZ_QUESTIONS: QuizQuestion[] = [
  {
    id: 1,
    question: "Qu'est-ce qu'un conteneur Docker ?",
    options: [
      "Un logiciel de virtualisation comme VirtualBox",
      "Un environnement isole qui contient une application et ses dependances",
      "Un systeme d'exploitation complet",
      "Un outil de compilation de code",
    ],
    correctIndex: 1,
    explanation: "Un conteneur isole l'application avec ses dependances, ce n'est PAS une VM complete.",
    topic: 'docker-basics',
  },
  {
    id: 2,
    question: "Quelle est la difference entre une image et un conteneur ?",
    options: [
      "Il n'y a pas de difference",
      "L'image est en cours d'execution, le conteneur est le modele",
      "L'image est le modele (lecture seule), le conteneur est une instance en execution",
      "Le conteneur est plus leger que l'image",
    ],
    correctIndex: 2,
    explanation: "L'image est un modele en lecture seule, le conteneur est une instance vivante.",
    topic: 'docker-basics',
  },
  {
    id: 3,
    question: "A quoi sert WSL2 ?",
    options: [
      "A remplacer Windows par Linux",
      "A faire tourner un noyau Linux sous Windows",
      "A accelerer Docker sur Mac",
      "A compiler du code C++",
    ],
    correctIndex: 1,
    explanation: "WSL2 permet d'executer un vrai noyau Linux sous Windows.",
    topic: 'wsl',
  },
  {
    id: 4,
    question: "Quelle commande lance un conteneur en arriere-plan ?",
    options: [
      "docker run nginx",
      "docker run -d nginx",
      "docker start -background nginx",
      "docker run --silent nginx",
    ],
    correctIndex: 1,
    explanation: "Le flag `-d` signifie \"detached\" (arriere-plan).",
    topic: 'containers',
  },
  {
    id: 5,
    question: "Que fait `-p 8080:80` dans `docker run -p 8080:80 nginx` ?",
    options: [
      "Limite la memoire a 8080 MB et le CPU a 80%",
      "Mappe le port 80 du host vers le port 8080 du conteneur",
      "Mappe le port 8080 du host vers le port 80 du conteneur",
      "Ouvre les ports 8080 et 80 sur le host",
    ],
    correctIndex: 2,
    explanation: "Format : `-p HOST:CONTENEUR` â†’ 8080 sur ton PC pointe vers 80 dans le conteneur.",
    topic: 'containers',
  },
  {
    id: 6,
    question: "Quelle commande permet de lister les conteneurs en cours d'execution ?",
    options: [
      "docker list",
      "docker containers",
      "docker ps",
      "docker running",
    ],
    correctIndex: 2,
    explanation: "`docker ps` liste les conteneurs actifs (`-a` pour tous).",
    topic: 'containers',
  },
  {
    id: 7,
    question: "Qu'est-ce qu'un Dockerfile ?",
    options: [
      "Un fichier de configuration JSON",
      "Un fichier texte contenant les instructions pour construire une image",
      "Un fichier binaire Docker",
      "Un fichier de logs",
    ],
    correctIndex: 1,
    explanation: "Le Dockerfile est un fichier texte avec les instructions de build.",
    topic: 'dockerfile',
  },
  {
    id: 8,
    question: "Que fait l'instruction `FROM nginx:alpine` dans un Dockerfile ?",
    options: [
      "Telecharge et installe Alpine Linux",
      "Definit l'image de base a partir de laquelle construire",
      "Lance un conteneur Nginx",
      "Copie les fichiers d'Alpine vers Nginx",
    ],
    correctIndex: 1,
    explanation: "`FROM` definit l'image de base, le point de depart.",
    topic: 'dockerfile',
  },
  {
    id: 9,
    question: "Quelle commande construit une image depuis un Dockerfile ?",
    options: [
      "docker create -t mon-image .",
      "docker compile -t mon-image .",
      "docker build -t mon-image .",
      "docker make -t mon-image .",
    ],
    correctIndex: 2,
    explanation: "`docker build` construit une image, `-t` donne un nom (tag).",
    topic: 'dockerfile',
  },
  {
    id: 10,
    question: "A quoi sert Docker Compose ?",
    options: [
      "A compiler du code Docker",
      "A definir et gerer des applications multi-conteneurs",
      "A remplacer Docker",
      "A creer des images plus rapidement",
    ],
    correctIndex: 1,
    explanation: "Docker Compose orchestre plusieurs conteneurs ensemble.",
    topic: 'compose',
  },
  {
    id: 11,
    question: "Quel est le format du fichier Docker Compose ?",
    options: [
      "JSON",
      "XML",
      "YAML",
      "TOML",
    ],
    correctIndex: 2,
    explanation: "Docker Compose utilise le format YAML (.yml).",
    topic: 'compose',
  },
  {
    id: 12,
    question: "Quelle commande lance tous les services definis dans docker-compose.yml ?",
    options: [
      "docker compose start",
      "docker compose run",
      "docker compose up",
      "docker compose launch",
    ],
    correctIndex: 2,
    explanation: "`docker compose up` cree et demarre tous les services.",
    topic: 'compose',
  },
  {
    id: 13,
    question: "Que fait `docker exec -it mon-conteneur bash` ?",
    options: [
      "Supprime le conteneur",
      "Ouvre un terminal interactif dans le conteneur",
      "Execute un script bash sur le host",
      "Redemarre le conteneur",
    ],
    correctIndex: 1,
    explanation: "`-it` = interactif + terminal, `bash` = ouvrir un shell.",
    topic: 'containers',
  },
  {
    id: 14,
    question: "Pourquoi preferer `nginx:alpine` a `nginx` ?",
    options: [
      "Alpine est plus securise",
      "Alpine est plus rapide",
      "Alpine est beaucoup plus leger (~43 MB vs ~187 MB)",
      "Alpine supporte plus de fonctionnalites",
    ],
    correctIndex: 2,
    explanation: "Alpine est une distro minimaliste, image 4x plus legere.",
    topic: 'dockerfile',
  },
  {
    id: 15,
    question: "Que fait l'instruction `COPY index.html /usr/share/nginx/html/` ?",
    options: [
      "Telecharge index.html depuis Internet",
      "Copie index.html depuis ton PC vers l'image",
      "Cree un nouveau fichier index.html vide",
      "Supprime l'ancien index.html",
    ],
    correctIndex: 1,
    explanation: "COPY copie des fichiers depuis le contexte de build vers l'image.",
    topic: 'dockerfile',
  },
  {
    id: 16,
    question: "Que fait `docker system prune` ?",
    options: [
      "Met a jour Docker",
      "Supprime tous les conteneurs en cours",
      "Supprime les ressources Docker inutilisees (conteneurs arretes, images orphelines, etc.)",
      "Reinstalle Docker",
    ],
    correctIndex: 2,
    explanation: "Nettoie les ressources non utilisees pour liberer de l'espace.",
    topic: 'docker-basics',
  },
  {
    id: 17,
    question: "Qu'est-ce que le flag `-v ~/data:/app/data` fait ?",
    options: [
      "Definit la version de Docker",
      "Active le mode verbose",
      "Monte un dossier du host dans le conteneur (volume)",
      "Verifie le conteneur",
    ],
    correctIndex: 2,
    explanation: "`-v` monte un volume : lie un dossier host a un dossier conteneur.",
    topic: 'containers',
  },
  {
    id: 18,
    question: "Que se passe-t-il si tu modifies un fichier HTML et que tu rafraichis la page (sans volume, image custom) ?",
    options: [
      "Le changement est visible immediatement",
      "Rien ne change car l'image doit etre reconstruite",
      "Docker detecte automatiquement les changements",
      "Le conteneur redemarre tout seul",
    ],
    correctIndex: 1,
    explanation: "Sans volume, les fichiers sont dans l'image, il faut rebuild.",
    topic: 'dockerfile',
  },
  {
    id: 19,
    question: "Quelle version de WSL est necessaire pour Docker ?",
    options: [
      "WSL1",
      "WSL2",
      "WSL3",
      "N'importe quelle version",
    ],
    correctIndex: 1,
    explanation: "Docker Desktop necessite WSL2 pour fonctionner sous Windows.",
    topic: 'wsl',
  },
  {
    id: 20,
    question: "Que fait `docker compose down` ?",
    options: [
      "Arrete les conteneurs seulement",
      "Arrete et supprime les conteneurs, reseaux et volumes anonymes du projet",
      "Supprime les images",
      "Desinstalle Docker Compose",
    ],
    correctIndex: 1,
    explanation: "`down` arrete et nettoie tout ce que `up` a cree.",
    topic: 'compose',
  },
  // Multi-stage Builds (8 questions)
  {
    id: 21,
    question: "Quel mot-cle nomme un stage dans un Dockerfile multi-stage ?",
    options: [
      "NAME",
      "AS",
      "STAGE",
      "LABEL",
    ],
    correctIndex: 1,
    explanation: "`FROM node:18 AS builder` nomme le stage 'builder' pour pouvoir le referencer.",
    topic: 'multistage',
  },
  {
    id: 22,
    question: "Comment copier un fichier depuis un stage precedent ?",
    options: [
      "COPY builder:/app/dist ./dist",
      "COPY --from=builder /app/dist ./dist",
      "COPY --stage=builder /app/dist ./dist",
      "GET --from=builder /app/dist ./dist",
    ],
    correctIndex: 1,
    explanation: "`COPY --from=builder` copie des fichiers depuis le stage nomme 'builder'.",
    topic: 'multistage',
  },
  {
    id: 23,
    question: "Quel est l'effet principal du multi-stage sur la taille de l'image ?",
    options: [
      "Augmentation de 50%",
      "Aucun effet",
      "Reduction de 70-90%",
      "Reduction de 10-20%",
    ],
    correctIndex: 2,
    explanation: "Le multi-stage peut reduire la taille de 70-90% en eliminant les outils de build.",
    topic: 'multistage',
  },
  {
    id: 24,
    question: "Pourquoi copier package.json avant le code source ?",
    options: [
      "C'est obligatoire",
      "Pour utiliser le cache Docker et accelerer les builds",
      "Pour eviter les erreurs",
      "Pour que npm fonctionne",
    ],
    correctIndex: 1,
    explanation: "Si package.json n'a pas change, la layer `npm install` est en cache = build beaucoup plus rapide.",
    topic: 'multistage',
  },
  {
    id: 25,
    question: "Que contient .dockerignore ?",
    options: [
      "Les commandes Docker a ignorer",
      "Les fichiers a exclure du contexte de build",
      "Les conteneurs a ne pas demarrer",
      "Les ports a bloquer",
    ],
    correctIndex: 1,
    explanation: "`.dockerignore` liste les fichiers qui ne seront pas envoyes au daemon Docker lors du build.",
    topic: 'multistage',
  },
  {
    id: 26,
    question: "Quelle est la difference entre ARG et ENV dans un Dockerfile ?",
    options: [
      "Pas de difference",
      "ARG existe uniquement au build, ENV persiste au runtime",
      "ENV existe uniquement au build, ARG persiste au runtime",
      "ARG est pour Linux, ENV pour Windows",
    ],
    correctIndex: 1,
    explanation: "ARG disparait apres le build. ENV est embarque dans l'image et accessible par le conteneur.",
    topic: 'multistage',
  },
  {
    id: 27,
    question: "Quelle image Alpine est la plus legere pour une app Node.js ?",
    options: [
      "node:18 (~1.1 GB)",
      "node:18-slim (~250 MB)",
      "node:18-alpine (~180 MB)",
      "ubuntu:22.04 + node (~600 MB)",
    ],
    correctIndex: 2,
    explanation: "node:18-alpine est la plus legere grace a Alpine Linux (~5 MB de base).",
    topic: 'multistage',
  },
  {
    id: 28,
    question: "Dans un multi-stage, combien de stages produisent l'image finale ?",
    options: [
      "Tous les stages",
      "Seulement le dernier stage",
      "Le premier et le dernier",
      "Ceux marques avec AS",
    ],
    correctIndex: 1,
    explanation: "Seul le dernier `FROM` produit l'image finale. Les stages precedents sont temporaires.",
    topic: 'multistage',
  },
  // Networking (8 questions)
  {
    id: 29,
    question: "Quel type de reseau Docker offre la resolution DNS automatique ?",
    options: [
      "Le bridge par defaut",
      "Un bridge custom (user-defined)",
      "Le reseau host",
      "Le reseau none",
    ],
    correctIndex: 1,
    explanation: "Seuls les reseaux bridge custom offrent la resolution DNS par nom de conteneur.",
    topic: 'networking',
  },
  {
    id: 30,
    question: "Que fait `docker network create mon-reseau` ?",
    options: [
      "Cree un reseau host",
      "Cree un reseau bridge custom",
      "Cree un reseau overlay",
      "Cree un VPN Docker",
    ],
    correctIndex: 1,
    explanation: "Par defaut, `docker network create` cree un reseau de type bridge.",
    topic: 'networking',
  },
  {
    id: 31,
    question: "Comment un conteneur en reseau host accede-t-il au port 3000 ?",
    options: [
      "Via -p 3000:3000",
      "Directement sur localhost:3000 sans -p",
      "Via docker exec",
      "Il ne peut pas",
    ],
    correctIndex: 1,
    explanation: "En mode host, le conteneur partage le reseau du host. Pas besoin de mapper les ports.",
    topic: 'networking',
  },
  {
    id: 32,
    question: "Comment isoler une base de donnees des services frontend ?",
    options: [
      "Utiliser des mots de passe",
      "Placer DB et frontend sur des reseaux separes",
      "Utiliser des ports differents",
      "Limiter la memoire de la DB",
    ],
    correctIndex: 1,
    explanation: "Des reseaux separes empechent toute communication directe entre les services.",
    topic: 'networking',
  },
  {
    id: 33,
    question: "Quelle commande connecte un conteneur existant a un reseau ?",
    options: [
      "docker network attach",
      "docker network connect mon-reseau mon-conteneur",
      "docker connect mon-conteneur mon-reseau",
      "docker run --network",
    ],
    correctIndex: 1,
    explanation: "`docker network connect` permet d'attacher un conteneur deja lance a un reseau.",
    topic: 'networking',
  },
  {
    id: 34,
    question: "EXPOSE dans un Dockerfile :",
    options: [
      "Ouvre le port sur le host automatiquement",
      "Documente le port sans l'ouvrir (il faut -p)",
      "Bloque le port pour les autres conteneurs",
      "Configure le firewall Docker",
    ],
    correctIndex: 1,
    explanation: "EXPOSE est purement informatif. Seul `-p` au `docker run` publie reellement le port.",
    topic: 'networking',
  },
  {
    id: 35,
    question: "Quel reseau Docker desactive completement le networking ?",
    options: [
      "bridge",
      "host",
      "none",
      "isolated",
    ],
    correctIndex: 2,
    explanation: "Le reseau `none` isole totalement le conteneur : pas de reseau du tout.",
    topic: 'networking',
  },
  {
    id: 36,
    question: "Dans Docker Compose, comment les services se trouvent-ils entre eux ?",
    options: [
      "Par adresse IP hardcodee",
      "Par le nom du service (DNS automatique)",
      "Par fichier de configuration",
      "Ils ne peuvent pas communiquer",
    ],
    correctIndex: 1,
    explanation: "Compose cree un reseau avec DNS : le nom du service = le hostname.",
    topic: 'networking',
  },
  // Security (9 questions)
  {
    id: 37,
    question: "Quelle instruction Dockerfile change l'utilisateur d'execution ?",
    options: [
      "RUN useradd",
      "USER appuser",
      "ADMIN appuser",
      "SWITCH appuser",
    ],
    correctIndex: 1,
    explanation: "L'instruction `USER` definit quel utilisateur execute les commandes suivantes et le CMD.",
    topic: 'security',
  },
  {
    id: 38,
    question: "Pourquoi pinner les versions des images de base (ex: nginx:1.25.3) ?",
    options: [
      "Pour que le build soit plus rapide",
      "Pour garantir des builds reproductibles et stables",
      "Pour reduire la taille de l'image",
      "C'est obligatoire",
    ],
    correctIndex: 1,
    explanation: "Une version precise garantit que le meme build produit toujours le meme resultat.",
    topic: 'security',
  },
  {
    id: 39,
    question: "Que fait `--cap-drop ALL` ?",
    options: [
      "Arrete tous les conteneurs",
      "Supprime toutes les capabilities Linux du conteneur",
      "Desactive le reseau",
      "Supprime tous les fichiers",
    ],
    correctIndex: 1,
    explanation: "`--cap-drop ALL` retire toutes les capabilities. On peut ensuite en rajouter avec `--cap-add`.",
    topic: 'security',
  },
  {
    id: 40,
    question: "Comment scanner les CVE d'une image Docker ?",
    options: [
      "docker check image",
      "docker scout cves monimage",
      "docker scan --security",
      "docker audit monimage",
    ],
    correctIndex: 1,
    explanation: "`docker scout cves` analyse une image et liste les vulnerabilites connues (CVE).",
    topic: 'security',
  },
  {
    id: 41,
    question: "Ou stocker les mots de passe pour Docker Compose en production ?",
    options: [
      "Dans le docker-compose.yml en clair",
      "Dans Docker Secrets ou un gestionnaire de secrets",
      "Dans le Dockerfile avec ENV",
      "Dans un commentaire du code",
    ],
    correctIndex: 1,
    explanation: "Docker Secrets (ou un vault) chiffre les donnees sensibles. Jamais en clair dans les fichiers.",
    topic: 'security',
  },
  {
    id: 42,
    question: "Que fait HEALTHCHECK CMD curl -f http://localhost/ ?",
    options: [
      "Installe curl dans l'image",
      "Verifie periodiquement que le serveur repond",
      "Telecharge la page d'accueil",
      "Configure le proxy",
    ],
    correctIndex: 1,
    explanation: "HEALTHCHECK execute la commande regulierement. Si elle echoue, le conteneur est marque unhealthy.",
    topic: 'security',
  },
  {
    id: 43,
    question: "Quel fichier ne devrait JAMAIS etre dans une image Docker ?",
    options: [
      "package.json",
      ".env contenant des secrets",
      "index.html",
      "server.js",
    ],
    correctIndex: 1,
    explanation: "Les fichiers .env avec des secrets doivent etre dans .dockerignore et passes via variables.",
    topic: 'security',
  },
  {
    id: 44,
    question: "Que fait `docker run --read-only` ?",
    options: [
      "Empeche de lire les fichiers",
      "Rend le filesystem du conteneur en lecture seule",
      "Active les logs en lecture seule",
      "Protege les images contre la suppression",
    ],
    correctIndex: 1,
    explanation: "`--read-only` empeche toute ecriture dans le filesystem, renfor\u00e7ant la securite.",
    topic: 'security',
  },
  {
    id: 45,
    question: "Pourquoi eviter le mode `--privileged` ?",
    options: [
      "Il est plus lent",
      "Il donne au conteneur un acces total au host (dangereux)",
      "Il utilise plus de memoire",
      "Il desactive les logs",
    ],
    correctIndex: 1,
    explanation: "`--privileged` supprime toute isolation. Le conteneur peut tout faire sur le host.",
    topic: 'security',
  },
  // Advanced Compose (9 questions)
  {
    id: 46,
    question: "Que fait `condition: service_healthy` dans depends_on ?",
    options: [
      "Demarre le service immediatement",
      "Attend que le healthcheck du service dependant passe",
      "Verifie que le service est installe",
      "Connecte les services au meme reseau",
    ],
    correctIndex: 1,
    explanation: "Le service ne demarre que quand la dependance est healthy (healthcheck OK).",
    topic: 'advanced-compose',
  },
  {
    id: 47,
    question: "A quoi servent les profiles Docker Compose ?",
    options: [
      "A limiter les ressources",
      "A activer des services selon le contexte (dev, prod)",
      "A definir des reseaux",
      "A configurer les volumes",
    ],
    correctIndex: 1,
    explanation: "Les profiles permettent d'avoir des services optionnels par environnement.",
    topic: 'advanced-compose',
  },
  {
    id: 48,
    question: "Quel fichier override est charge automatiquement par Docker Compose ?",
    options: [
      "docker-compose.local.yml",
      "docker-compose.override.yml",
      "docker-compose.dev.yml",
      "docker-compose.extra.yml",
    ],
    correctIndex: 1,
    explanation: "Docker Compose charge automatiquement `docker-compose.override.yml` s'il existe.",
    topic: 'advanced-compose',
  },
  {
    id: 49,
    question: "Comment limiter un service a 1 CPU et 512 MB de RAM ?",
    options: [
      "resources: cpu=1 ram=512",
      "deploy: resources: limits: cpus: '1' memory: 512M",
      "limits: cpu=1 memory=512M",
      "performance: max_cpu=1 max_ram=512M",
    ],
    correctIndex: 1,
    explanation: "Les limites se definissent sous `deploy.resources.limits` dans le compose file.",
    topic: 'advanced-compose',
  },
  {
    id: 50,
    question: "Que signifie `x-common` dans un docker-compose.yml ?",
    options: [
      "Un service nomme common",
      "Un champ d'extension YAML reutilisable",
      "Une variable d'environnement",
      "Un reseau externe",
    ],
    correctIndex: 1,
    explanation: "Le prefixe `x-` definit des extensions YAML. Docker les ignore mais on peut les referencer.",
    topic: 'advanced-compose',
  },
  {
    id: 51,
    question: "Comment combiner un fichier de base et un fichier de prod ?",
    options: [
      "docker compose merge base.yml prod.yml",
      "docker compose -f docker-compose.yml -f docker-compose.prod.yml up",
      "docker compose up --file prod",
      "docker compose concat base prod",
    ],
    correctIndex: 1,
    explanation: "L'option `-f` multiple merge les fichiers. Le second override les valeurs du premier.",
    topic: 'advanced-compose',
  },
  {
    id: 52,
    question: "Que fait `docker compose up --scale api=3` ?",
    options: [
      "Cree 3 fichiers compose",
      "Lance 3 replicas du service api",
      "Triple les ressources de l'api",
      "Deploie sur 3 serveurs",
    ],
    correctIndex: 1,
    explanation: "`--scale` cree plusieurs instances du meme service pour le load balancing.",
    topic: 'advanced-compose',
  },
  {
    id: 53,
    question: "Quelle syntaxe YAML reutilise un bloc defini avec une ancre ?",
    options: [
      "@common",
      "*common",
      "#common",
      "$common",
    ],
    correctIndex: 1,
    explanation: "En YAML, `&common` definit une ancre et `*common` la reference pour reutiliser le bloc.",
    topic: 'advanced-compose',
  },
  {
    id: 54,
    question: "Quel test healthcheck convient pour PostgreSQL ?",
    options: [
      "curl http://localhost:5432",
      "pg_isready -U postgres",
      "ping localhost",
      "telnet localhost 5432",
    ],
    correctIndex: 1,
    explanation: "`pg_isready` est l'outil standard pour verifier que PostgreSQL accepte les connexions.",
    topic: 'advanced-compose',
  },
  // Registry (8 questions)
  {
    id: 55,
    question: "Quel est le registry par defaut de Docker ?",
    options: [
      "GitHub Container Registry",
      "Docker Hub (docker.io)",
      "Amazon ECR",
      "Google GCR",
    ],
    correctIndex: 1,
    explanation: "Docker Hub est le registry par defaut. `docker pull nginx` telecharge depuis Docker Hub.",
    topic: 'registry',
  },
  {
    id: 56,
    question: "Quel format de tag suit le semantic versioning ?",
    options: [
      "latest",
      "v1.2.3",
      "2024-01-15",
      "abc123def",
    ],
    correctIndex: 1,
    explanation: "Le semantic versioning (major.minor.patch) comme v1.2.3 est le standard pour le tagging.",
    topic: 'registry',
  },
  {
    id: 57,
    question: "Que fait `docker tag myapp:latest myuser/myapp:v1.0` ?",
    options: [
      "Renomme l'image",
      "Cree un alias (tag) pointant vers la meme image",
      "Copie l'image",
      "Supprime l'ancien tag",
    ],
    correctIndex: 1,
    explanation: "`docker tag` cree un nouveau nom pour la meme image. Les deux tags coexistent.",
    topic: 'registry',
  },
  {
    id: 58,
    question: "Quelle commande envoie une image vers un registry ?",
    options: [
      "docker upload",
      "docker push myuser/myapp:v1.0",
      "docker send",
      "docker deploy",
    ],
    correctIndex: 1,
    explanation: "`docker push` envoie l'image vers le registry. L'image doit etre taggee avec le bon prefix.",
    topic: 'registry',
  },
  {
    id: 59,
    question: "Pourquoi preferer un access token a un mot de passe pour docker login ?",
    options: [
      "C'est plus rapide",
      "On peut le revoquer sans changer le mot de passe",
      "Il est plus court",
      "Il n'expire jamais",
    ],
    correctIndex: 1,
    explanation: "Un token peut etre revoque individuellement et avoir des permissions limitees.",
    topic: 'registry',
  },
  {
    id: 60,
    question: "Comment lancer un registry Docker local ?",
    options: [
      "docker registry start",
      "docker run -d -p 5000:5000 registry:2",
      "docker compose up registry",
      "docker init registry",
    ],
    correctIndex: 1,
    explanation: "L'image `registry:2` est le registry Docker officiel. Il ecoute sur le port 5000.",
    topic: 'registry',
  },
  {
    id: 61,
    question: "Quel est l'avantage d'un registry prive ?",
    options: [
      "Il est gratuit",
      "Securite, vitesse et controle total sur les images",
      "Il est plus simple",
      "Il supporte plus de tags",
    ],
    correctIndex: 1,
    explanation: "Un registry prive garde les images en interne, plus rapide et plus securise pour l'entreprise.",
    topic: 'registry',
  },
  {
    id: 62,
    question: "Que signifie le tag `latest` sur Docker Hub ?",
    options: [
      "La version la plus stable",
      "Le dernier push effectue (peut changer a tout moment)",
      "La version recommandee",
      "La version la plus legere",
    ],
    correctIndex: 1,
    explanation: "`latest` est un tag comme un autre, mais il pointe vers le dernier push. Pas forcement stable.",
    topic: 'registry',
  },
  // CI/CD (8 questions)
  {
    id: 63,
    question: "Que signifie CD dans CI/CD ?",
    options: [
      "Code Delivery",
      "Continuous Delivery / Deployment",
      "Container Deployment",
      "Cloud Distribution",
    ],
    correctIndex: 1,
    explanation: "CD = Continuous Delivery (livraison auto) ou Continuous Deployment (deploiement auto).",
    topic: 'cicd',
  },
  {
    id: 64,
    question: "Ou se trouvent les fichiers workflow GitHub Actions ?",
    options: [
      ".ci/workflows/",
      ".github/workflows/",
      "workflows/",
      ".actions/",
    ],
    correctIndex: 1,
    explanation: "GitHub Actions detecte les workflows dans `.github/workflows/*.yml`.",
    topic: 'cicd',
  },
  {
    id: 65,
    question: "Comment stocker le token Docker Hub dans GitHub ?",
    options: [
      "Dans le workflow YAML",
      "Dans les Secrets du repository (Settings > Secrets)",
      "Dans un fichier .env commite",
      "Dans le README",
    ],
    correctIndex: 1,
    explanation: "Les GitHub Secrets sont chiffres et accessibles dans les workflows via `${{ secrets.TOKEN }}`.",
    topic: 'cicd',
  },
  {
    id: 66,
    question: "Quel trigger declenche un workflow a chaque push sur main ?",
    options: [
      "on: commit: branches: main",
      "on: push: branches: [main]",
      "trigger: push-main",
      "when: push(main)",
    ],
    correctIndex: 1,
    explanation: "La syntaxe `on: push: branches: [main]` est le trigger standard pour un push sur main.",
    topic: 'cicd',
  },
  {
    id: 67,
    question: "A quoi sert `docker/setup-buildx-action` en CI ?",
    options: [
      "A installer Docker",
      "A configurer Buildx pour les builds avances (multi-plateforme, cache)",
      "A tester les images",
      "A deployer en production",
    ],
    correctIndex: 1,
    explanation: "Buildx est necessaire pour les builds multi-plateformes et l'utilisation avancee du cache.",
    topic: 'cicd',
  },
  {
    id: 68,
    question: "Pourquoi builder pour linux/amd64 ET linux/arm64 ?",
    options: [
      "Pour doubler la vitesse",
      "Pour supporter les Macs M1/M2 et les Raspberry Pi",
      "Pour reduire la taille de l'image",
      "C'est obligatoire",
    ],
    correctIndex: 1,
    explanation: "AMD64 = Intel/AMD classique. ARM64 = Apple Silicon (M1/M2/M3) et Raspberry Pi.",
    topic: 'cicd',
  },
  {
    id: 69,
    question: "Que fait l'action `actions/checkout@v4` ?",
    options: [
      "Deploie le code",
      "Clone le code du repository dans le runner",
      "Cree une pull request",
      "Valide le code",
    ],
    correctIndex: 1,
    explanation: "checkout telecharge le code du repo sur le runner pour que les etapes suivantes y accedent.",
    topic: 'cicd',
  },
  {
    id: 70,
    question: "Quelle bonne pratique protege la branche main ?",
    options: [
      "Ne jamais commiter sur main",
      "Branch protection + CI obligatoire avant merge",
      "Supprimer la branche main",
      "Rendre le repo prive",
    ],
    correctIndex: 1,
    explanation: "Les branch protection rules forcent la CI a passer et la review avant tout merge sur main.",
    topic: 'cicd',
  },
];
